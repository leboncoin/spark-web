import { Meta, Canvas, ArgTypes } from '@storybook/addon-docs/blocks'
import { A11yReport } from '@docs/helpers/A11yReport'
import { Kbd } from '@spark-ui/components/kbd'

import { Slider } from '.'

import * as stories from './Slider.stories'

<Meta of={stories} />

# Slider

An input where the user selects a value from within a given range.

<Canvas of={stories.Default} />

## Install

```sh
npm install @spark-ui/components
```

## Anatomy

```tsx
import { Slider } from '@spark-ui/components/slider'

export default () => (
  <Slider>
    <Slider.Track /> 
    <Slider.thumb /> 
  </Slider>
);
```

## API Reference

### Slider

Contains all the slider component parts. It will render an input for each thumb when used within a form to ensure events propagate correctly.

<ArgTypes of={Slider} />



### _.Thumb

A draggable thumb. You can render multiple thumbs.

<ArgTypes of={Slider.Thumb} />

### _.Track

The track shows the range available for user selection.

<ArgTypes of={Slider.Track} />


## Examples

### Controlled

Use `value` to control the value with your own state.

Use either `onValueChange` or `onValueCommit` to update this state when internal changes happen:
- `onValueChange` Event handler called when the value changes.
- `onValueCommit`: Event handler called when the value changes at the end of an interaction. Useful when you only need to capture a final value e.g. to update a backend service.

<Canvas of={stories.Controlled} />

### Range

Add multiple thumbs and values to create a range slider.

<Canvas of={stories.Range} />

### Intent

Use `intent` prop to set the color of track and thumb.

<Canvas of={stories.Intent} />

### Shape

Use `shape` prop to set the shape of track and range.

<Canvas of={stories.Shape} />

### Disabled

Use `disabled` prop to indicate that slider is disabled.

<Canvas of={stories.Disabled} />

## Advanced Examples

### Restricted values

If you find yourself in a situation where you have a fixed set of values for your range, you can achieve this using the `max` property.
The `max` property should be set to the number of steps you have within your set of values minus one.

Additionally, you will need to remap the value from the **Slider** component to the values comprised in your set of values.

For example, let's say your set of values is `[10, 25, 50, 100]`. In this case, you would set the `max` property to 3 and remap the values from the **Slider**.

The **Slider** component, by default, outputs values from `min` to `max` (3 in our case). Therefore, it's your responsibility to map these values to the corresponding values in your set.

To ensure **proper accessibility**, make sure to set the `aria-valuetext` attribute to the remapped value. This will ensure that the correct value is announced to users who rely on assistive technologies.

Here's an example to illustrate this:

<Canvas of={stories.RestrictedValues} />

### Custom thumb with value display

You can customize the thumb to display the current value by adding custom content inside the thumb.

<Canvas of={stories.ThumbWithValue} />

## Form field

### Label

Use `FormField.Label` to add a label to the slider.

<Canvas of={stories.FormFieldLabel} />

### Helper message

Use `FormField.HelperMessage` to add a helper message to the slider.

<Canvas of={stories.FormFieldHelperMessage} />

### Validation

set the `state` prop of the `FormField` to `error` to indicate that the input is invalid. Optionally use the `FormField.ErrorMessage` to describe why the input is invalid.

<Canvas of={stories.FormFieldValidation} />

## Accessibility

<A11yReport of="slider" />

Adheres to the [Slider WAI-ARIA design pattern](https://www.w3.org/WAI/ARIA/apg/patterns/slider-multithumb/).

Implementations should define an `aria-label` attribute on each `Slider.Thumb` to preserve accessibility.

### Keyboard Interactions

- <Kbd>ArrowRight</Kbd>: Increments by the `step` value.
- <Kbd>ArrowLeft</Kbd>: Decrements by the `step` value.
- <Kbd>ArrowUp</Kbd>: Increases the value by the `step` amount.
- <Kbd>ArrowDown</Kbd>: Decreases the value by the `step` amount.
- <Kbd>PageUp</Kbd>: Increases the value by a larger `step`.
- <Kbd>PageDown</Kbd>: Decreases the value by a larger `step`.
- <Kbd>Shift + ArrowUp</Kbd>: Increases the value by a larger `step`.
- <Kbd>Shift + ArrowDown</Kbd>: Decreases the value by a larger `step`.
- <Kbd>Home</Kbd>: Sets the value to its minimum.
- <Kbd>End</Kbd>: Sets the value to its maximum.
