import { Meta, Canvas, ArgTypes } from '@storybook/addon-docs/blocks'
import { Kbd } from '@spark-ui/components/kbd'
import { A11yReport } from '@docs/helpers/A11yReport'

import { AlertDialog } from '.'

import * as stories from './AlertDialog.stories'

<Meta of={stories} />

# AlertDialog

A modal dialog that interrupts the user with important content and expects a response. Examples include action confirmation prompts and error message confirmations.

- Focus is automatically trapped.
- Can be controlled or uncontrolled.
- Manages screen reader announcements with Title and Description components.
- Esc closes the component automatically.

<Canvas of={stories.Usage} />

## Install

```sh
npm install @spark-ui/components
```

## Anatomy

```tsx
import { AlertDialog } from '@spark-ui/components/alert-dialog'

export default () => (
  <AlertDialog>
      <AlertDialog.Trigger />
      <AlertDialog.Portal>
        <AlertDialog.Overlay />
        <AlertDialog.Content>
          <AlertDialog.Header>
            <AlertDialog.Title />
          </AlertDialog.Header>
          <AlertDialog.Body>
            <AlertDialog.Description />
          </AlertDialog.Body>
          <AlertDialog.Footer>
            <AlertDialog.Cancel />
            <AlertDialog.Action />
          </AlertDialog.Footer>
        </AlertDialog.Content>
      </AlertDialog.Portal>
    </AlertDialog>
);
```

## API Reference

### AlertDialog

Contains all the parts of an alert dialog.

<ArgTypes of={AlertDialog} />


### _.Trigger

A button that opens the dialog.

<ArgTypes of={AlertDialog.Trigger} />


### _.Portal

When used, portals your overlay and content parts into the body.

<ArgTypes of={AlertDialog.Portal} />

### _.Overlay

A layer that covers the inert portion of the view when the dialog is open.

<ArgTypes of={AlertDialog.Overlay} />

### _.Content

Contains content to be rendered when the dialog is open.

<ArgTypes of={AlertDialog.Content} />

### _.Header

To use inside of AlertDialog.Content. Sticky header inside the dialog.

<ArgTypes of={AlertDialog.Header} />

### _.Body

To use inside of AlertDialog.Content. Main content of the dialog. Becomes scrollable when content is overflowing the screen.

<ArgTypes of={AlertDialog.Body} />

### _.Footer

To use inside of AlertDialog.Content. Sticky footer to be rendered in the open dialog. Use it to render CTAs and make them accessible in every condition.

<ArgTypes of={AlertDialog.Footer} />


### _.Title

An accessible name to be announced when the dialog is opened.

<ArgTypes of={AlertDialog.Title} />


### _.Description

An accessible description to be announced when the dialog is opened.

<ArgTypes of={AlertDialog.Description} />

### _.Cancel

A button that closes the dialog. This button should be distinguished visually from AlertDialog.Action buttons.

<ArgTypes of={AlertDialog.Cancel} />

### _.Action

A button that closes the dialog. These buttons should be distinguished visually from the AlertDialog.Cancel button.

<ArgTypes of={AlertDialog.Action} />


## Examples

### Controlled

Use `open` and `onOpenChange` props to control the state of the dialog. This is specially useful to close the dialog after an async operation has completed.

<Canvas of={stories.Controlled} />

## Accessibility

<A11yReport of="alert-dialog" />

Adheres to the [Alert and Message Dialogs WAI-ARIA design pattern](https://www.w3.org/WAI/ARIA/apg/patterns/alertdialog).

### Guidelines

- Usage of `Dialog.Title` is **mandatory**. It serves as the accessible name for the dialog. If you prefer not to display the title, you can wrap it with `VisuallyHidden`.

### Keyboard Interactions

- <Kbd>Space</Kbd> - Opens/closes the dialog.
- <Kbd>Enter</Kbd> - Opens/closes the dialog.
- <Kbd>Tab</Kbd> - Moves focus to the next focusable element.
- <Kbd>Shift + Tab</Kbd> - Moves focus to the previous focusable element.
- <Kbd>Esc</Kbd> - Closes the dialog and moves focus to `AlertDialog.Trigger`.
